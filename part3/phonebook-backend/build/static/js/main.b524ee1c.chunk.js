(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},19:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),u=t.n(o),c=(t(19),t(2)),l=function(e){var n=e.filterText,t=e.filterTextInputHandler;return r.a.createElement("div",null,"filter show with ",r.a.createElement("input",{type:"text",onChange:t,value:n}))},i=function(e){var n=e.addPerson,t=e.nameInputHander,a=e.newName,o=e.numberInputHandler,u=e.newNumber;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Add a person"),r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{onChange:t,value:a})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{onChange:o,value:u})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},m=function(e){var n=e.person,t=e.filterText,a=e.destroyPerson;return n.name.toLowerCase().includes(t.toLowerCase())?r.a.createElement("div",null,n.name," ",n.number," ",r.a.createElement("button",{onClick:function(){return a(n)}},"delete")):null},s=function(e){var n=e.persons,t=e.filterText,a=e.destroyPerson;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Numbers"),n.map((function(e){return r.a.createElement(m,{key:e.name,person:e,filterText:t,destroyPerson:a})})))},f=t(3),d=t.n(f),p="/api/persons",b=function(){return d.a.get(p).then((function(e){return e.data}))},h=function(e){return d.a.post(p,e).then((function(e){return e.data}))},E=function(e,n){return d.a.put("".concat(p,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){return d.a.delete("".concat(p,"/").concat(e)).then((function(e){return e.data}))},g={message:null,type:!0},w=function(e){var n=e.notification;if(null===n.message)return null;var t=n.type?{color:"green"}:{color:"red"};return r.a.createElement("div",{className:"notification",style:t},n.message)},y=function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],o=n[1],u=Object(a.useState)(""),m=Object(c.a)(u,2),f=m[0],d=m[1],p=Object(a.useState)(""),y=Object(c.a)(p,2),T=y[0],j=y[1],O=Object(a.useState)(""),x=Object(c.a)(O,2),C=x[0],k=x[1],I=Object(a.useState)(g),P=Object(c.a)(I,2),H=P[0],L=P[1];Object(a.useEffect)((function(){b().then((function(e){o(e)}))}),[]);var N=function(e,n){if(window.confirm("".concat(e," is already added to phonebook, replace the old number with a new one?"))){var a=t.filter((function(n){return n.name.toLowerCase()===e.toLowerCase()}))[0].id;E(a,{name:e,number:n}).then((function(r){o(t.map((function(e){return e.id!==a?e:r}))),L({message:"Updated ".concat(e,"'s number to ").concat(n),type:!0}),setTimeout((function(){L({message:null})}),4e3)})).catch((function(n){L({message:"Info on ".concat(e," has already been removed from server"),type:!1}),setTimeout((function(){L({message:null})}),4e3),o(t.filter((function(e){return e.id!==a})))}))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(w,{notification:H}),r.a.createElement(l,{filterText:C,filterTextInputHandler:function(e){k(e.target.value)}}),r.a.createElement(i,{addPerson:function(e){(e.preventDefault(),t.find((function(e){return e.name.toLowerCase()===f.toLowerCase()})))?N(f,T):h({name:f,number:T}).then((function(e){o(t.concat(e)),L({message:"Added ".concat(e.name),type:!0}),setTimeout((function(){L({message:null})}),4e3)}));d(""),j("")},nameInputHander:function(e){d(e.target.value)},newName:f,numberInputHandler:function(e){j(e.target.value)},newNumber:T}),r.a.createElement(s,{persons:t,filterText:C,destroyPerson:function(e){window.confirm("Delete ".concat(e.name,"?"))&&v(e.id).then((function(n){o(t.filter((function(n){return n.id!==e.id}))),L({message:"Deleted ".concat(e.name),type:!0}),setTimeout((function(){L({message:null})}),4e3)}))}}))};u.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.b524ee1c.chunk.js.map